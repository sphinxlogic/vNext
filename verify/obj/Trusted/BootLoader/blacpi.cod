; Listing generated by Microsoft (R) Optimizing Compiler Version 14.00.50727.762 

	TITLE	D:\OSes\VERVE\verify\src\Trusted\BootLoader\SingLdrPc\blacpi.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?BlAcpiRsdp@@3PAU_ACPI_RSDP@@A			; BlAcpiRsdp
PUBLIC	?BlAcpiRsdpAddress@@3PAXA			; BlAcpiRsdpAddress
PUBLIC	?BlAcpiMadt@@3PAU_ACPI_MADT@@A			; BlAcpiMadt
PUBLIC	?BlAcpiFadt@@3PAU_ACPI_FADT@@A			; BlAcpiFadt
PUBLIC	?BlAcpiSrat@@3PAU_ACPI_SRAT@@A			; BlAcpiSrat
PUBLIC	?BlAcpiRsdt@@3PAU_ACPI_RSDT@@A			; BlAcpiRsdt
PUBLIC	?BlAcpiNumberOfProcessors@@3KA			; BlAcpiNumberOfProcessors
_BSS	SEGMENT
?BlAcpiRsdp@@3PAU_ACPI_RSDP@@A DD 01H DUP (?)		; BlAcpiRsdp
?BlAcpiRsdpAddress@@3PAXA DD 01H DUP (?)		; BlAcpiRsdpAddress
?BlAcpiMadt@@3PAU_ACPI_MADT@@A DD 01H DUP (?)		; BlAcpiMadt
?BlAcpiFadt@@3PAU_ACPI_FADT@@A DD 01H DUP (?)		; BlAcpiFadt
?BlAcpiSrat@@3PAU_ACPI_SRAT@@A DD 01H DUP (?)		; BlAcpiSrat
?BlAcpiRsdt@@3PAU_ACPI_RSDT@@A DD 01H DUP (?)		; BlAcpiRsdt
?BlAcpiNumberOfProcessors@@3KA DD 01H DUP (?)		; BlAcpiNumberOfProcessors
_BSS	ENDS
PUBLIC	?BlAcpiLocateRsdp@@YIPAU_ACPI_RSDP@@XZ		; BlAcpiLocateRsdp
EXTRN	?BlMmExtendedBiosDataArea@@3PAXA:DWORD		; BlMmExtendedBiosDataArea
EXTRN	?BlRtlComputeChecksum8@@YIEPBXK@Z:PROC		; BlRtlComputeChecksum8
; Function compile flags: /Odtp
; File d:\oses\verve\verify\src\trusted\bootloader\singldrpc\blacpi.cpp
;	COMDAT ?BlAcpiLocateRsdp@@YIPAU_ACPI_RSDP@@XZ
_TEXT	SEGMENT
_Rsdp$ = -12						; size = 4
_End$ = -8						; size = 4
_Start$ = -4						; size = 4
?BlAcpiLocateRsdp@@YIPAU_ACPI_RSDP@@XZ PROC		; BlAcpiLocateRsdp, COMDAT

; 235  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH

; 236  :     ULONG_PTR End;
; 237  :     PACPI_RSDP Rsdp;
; 238  :     ULONG_PTR Start;
; 239  : 
; 240  :     Start = 0xE0000;

  00006	c7 45 fc 00 00
	0e 00		 mov	 DWORD PTR _Start$[ebp], 917504 ; 000e0000H

; 241  :     End = 0x100000;

  0000d	c7 45 f8 00 00
	10 00		 mov	 DWORD PTR _End$[ebp], 1048576 ; 00100000H
$LN6@BlAcpiLoca:

; 242  : 
; 243  :     while (Start < End) {

  00014	8b 45 fc	 mov	 eax, DWORD PTR _Start$[ebp]
  00017	3b 45 f8	 cmp	 eax, DWORD PTR _End$[ebp]
  0001a	0f 83 8f 00 00
	00		 jae	 $LN5@BlAcpiLoca

; 244  : 
; 245  :         Rsdp = (PACPI_RSDP) Start;

  00020	8b 4d fc	 mov	 ecx, DWORD PTR _Start$[ebp]
  00023	89 4d f4	 mov	 DWORD PTR _Rsdp$[ebp], ecx

; 246  : 
; 247  :         if ((Rsdp->Signature[0] == 'R') &&
; 248  :             (Rsdp->Signature[1] == 'S') &&
; 249  :             (Rsdp->Signature[2] == 'D') &&
; 250  :             (Rsdp->Signature[3] == ' ') &&
; 251  :             (Rsdp->Signature[4] == 'P') &&
; 252  :             (Rsdp->Signature[5] == 'T') &&
; 253  :             (Rsdp->Signature[6] == 'R') &&
; 254  :             (Rsdp->Signature[7] == ' ') &&
; 255  :             (BlRtlComputeChecksum8(Rsdp, 20) == 0)
; 256  :             ) {

  00026	8b 55 f4	 mov	 edx, DWORD PTR _Rsdp$[ebp]
  00029	0f be 02	 movsx	 eax, BYTE PTR [edx]
  0002c	83 f8 52	 cmp	 eax, 82			; 00000052H
  0002f	75 70		 jne	 SHORT $LN4@BlAcpiLoca
  00031	8b 4d f4	 mov	 ecx, DWORD PTR _Rsdp$[ebp]
  00034	0f be 51 01	 movsx	 edx, BYTE PTR [ecx+1]
  00038	83 fa 53	 cmp	 edx, 83			; 00000053H
  0003b	75 64		 jne	 SHORT $LN4@BlAcpiLoca
  0003d	8b 45 f4	 mov	 eax, DWORD PTR _Rsdp$[ebp]
  00040	0f be 48 02	 movsx	 ecx, BYTE PTR [eax+2]
  00044	83 f9 44	 cmp	 ecx, 68			; 00000044H
  00047	75 58		 jne	 SHORT $LN4@BlAcpiLoca
  00049	8b 55 f4	 mov	 edx, DWORD PTR _Rsdp$[ebp]
  0004c	0f be 42 03	 movsx	 eax, BYTE PTR [edx+3]
  00050	83 f8 20	 cmp	 eax, 32			; 00000020H
  00053	75 4c		 jne	 SHORT $LN4@BlAcpiLoca
  00055	8b 4d f4	 mov	 ecx, DWORD PTR _Rsdp$[ebp]
  00058	0f be 51 04	 movsx	 edx, BYTE PTR [ecx+4]
  0005c	83 fa 50	 cmp	 edx, 80			; 00000050H
  0005f	75 40		 jne	 SHORT $LN4@BlAcpiLoca
  00061	8b 45 f4	 mov	 eax, DWORD PTR _Rsdp$[ebp]
  00064	0f be 48 05	 movsx	 ecx, BYTE PTR [eax+5]
  00068	83 f9 54	 cmp	 ecx, 84			; 00000054H
  0006b	75 34		 jne	 SHORT $LN4@BlAcpiLoca
  0006d	8b 55 f4	 mov	 edx, DWORD PTR _Rsdp$[ebp]
  00070	0f be 42 06	 movsx	 eax, BYTE PTR [edx+6]
  00074	83 f8 52	 cmp	 eax, 82			; 00000052H
  00077	75 28		 jne	 SHORT $LN4@BlAcpiLoca
  00079	8b 4d f4	 mov	 ecx, DWORD PTR _Rsdp$[ebp]
  0007c	0f be 51 07	 movsx	 edx, BYTE PTR [ecx+7]
  00080	83 fa 20	 cmp	 edx, 32			; 00000020H
  00083	75 1c		 jne	 SHORT $LN4@BlAcpiLoca
  00085	ba 14 00 00 00	 mov	 edx, 20			; 00000014H
  0008a	8b 4d f4	 mov	 ecx, DWORD PTR _Rsdp$[ebp]
  0008d	e8 00 00 00 00	 call	 ?BlRtlComputeChecksum8@@YIEPBXK@Z ; BlRtlComputeChecksum8
  00092	0f b6 c0	 movzx	 eax, al
  00095	85 c0		 test	 eax, eax
  00097	75 08		 jne	 SHORT $LN4@BlAcpiLoca

; 257  : 
; 258  :             return Rsdp;

  00099	8b 45 f4	 mov	 eax, DWORD PTR _Rsdp$[ebp]
  0009c	e9 bc 00 00 00	 jmp	 $LN7@BlAcpiLoca
$LN4@BlAcpiLoca:

; 259  :         }
; 260  : 
; 261  :         Start += 0x10;

  000a1	8b 4d fc	 mov	 ecx, DWORD PTR _Start$[ebp]
  000a4	83 c1 10	 add	 ecx, 16			; 00000010H
  000a7	89 4d fc	 mov	 DWORD PTR _Start$[ebp], ecx

; 262  :     }

  000aa	e9 65 ff ff ff	 jmp	 $LN6@BlAcpiLoca
$LN5@BlAcpiLoca:

; 263  : 
; 264  :     Start = (ULONG_PTR) BlMmExtendedBiosDataArea;

  000af	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?BlMmExtendedBiosDataArea@@3PAXA ; BlMmExtendedBiosDataArea
  000b5	89 55 fc	 mov	 DWORD PTR _Start$[ebp], edx

; 265  :     End = Start + 0x10000;

  000b8	8b 45 fc	 mov	 eax, DWORD PTR _Start$[ebp]
  000bb	05 00 00 01 00	 add	 eax, 65536		; 00010000H
  000c0	89 45 f8	 mov	 DWORD PTR _End$[ebp], eax
$LN3@BlAcpiLoca:

; 266  : 
; 267  :     while (Start < End) {

  000c3	8b 4d fc	 mov	 ecx, DWORD PTR _Start$[ebp]
  000c6	3b 4d f8	 cmp	 ecx, DWORD PTR _End$[ebp]
  000c9	0f 83 8c 00 00
	00		 jae	 $LN2@BlAcpiLoca

; 268  : 
; 269  :         Rsdp = (PACPI_RSDP) Start;

  000cf	8b 55 fc	 mov	 edx, DWORD PTR _Start$[ebp]
  000d2	89 55 f4	 mov	 DWORD PTR _Rsdp$[ebp], edx

; 270  : 
; 271  :         if ((Rsdp->Signature[0] == 'R') &&
; 272  :             (Rsdp->Signature[1] == 'S') &&
; 273  :             (Rsdp->Signature[2] == 'D') &&
; 274  :             (Rsdp->Signature[3] == ' ') &&
; 275  :             (Rsdp->Signature[4] == 'P') &&
; 276  :             (Rsdp->Signature[5] == 'T') &&
; 277  :             (Rsdp->Signature[6] == 'R') &&
; 278  :             (Rsdp->Signature[7] == ' ') &&
; 279  :             (BlRtlComputeChecksum8(Rsdp, 20) == 0)
; 280  :             ) {

  000d5	8b 45 f4	 mov	 eax, DWORD PTR _Rsdp$[ebp]
  000d8	0f be 08	 movsx	 ecx, BYTE PTR [eax]
  000db	83 f9 52	 cmp	 ecx, 82			; 00000052H
  000de	75 6d		 jne	 SHORT $LN1@BlAcpiLoca
  000e0	8b 55 f4	 mov	 edx, DWORD PTR _Rsdp$[ebp]
  000e3	0f be 42 01	 movsx	 eax, BYTE PTR [edx+1]
  000e7	83 f8 53	 cmp	 eax, 83			; 00000053H
  000ea	75 61		 jne	 SHORT $LN1@BlAcpiLoca
  000ec	8b 4d f4	 mov	 ecx, DWORD PTR _Rsdp$[ebp]
  000ef	0f be 51 02	 movsx	 edx, BYTE PTR [ecx+2]
  000f3	83 fa 44	 cmp	 edx, 68			; 00000044H
  000f6	75 55		 jne	 SHORT $LN1@BlAcpiLoca
  000f8	8b 45 f4	 mov	 eax, DWORD PTR _Rsdp$[ebp]
  000fb	0f be 48 03	 movsx	 ecx, BYTE PTR [eax+3]
  000ff	83 f9 20	 cmp	 ecx, 32			; 00000020H
  00102	75 49		 jne	 SHORT $LN1@BlAcpiLoca
  00104	8b 55 f4	 mov	 edx, DWORD PTR _Rsdp$[ebp]
  00107	0f be 42 04	 movsx	 eax, BYTE PTR [edx+4]
  0010b	83 f8 50	 cmp	 eax, 80			; 00000050H
  0010e	75 3d		 jne	 SHORT $LN1@BlAcpiLoca
  00110	8b 4d f4	 mov	 ecx, DWORD PTR _Rsdp$[ebp]
  00113	0f be 51 05	 movsx	 edx, BYTE PTR [ecx+5]
  00117	83 fa 54	 cmp	 edx, 84			; 00000054H
  0011a	75 31		 jne	 SHORT $LN1@BlAcpiLoca
  0011c	8b 45 f4	 mov	 eax, DWORD PTR _Rsdp$[ebp]
  0011f	0f be 48 06	 movsx	 ecx, BYTE PTR [eax+6]
  00123	83 f9 52	 cmp	 ecx, 82			; 00000052H
  00126	75 25		 jne	 SHORT $LN1@BlAcpiLoca
  00128	8b 55 f4	 mov	 edx, DWORD PTR _Rsdp$[ebp]
  0012b	0f be 42 07	 movsx	 eax, BYTE PTR [edx+7]
  0012f	83 f8 20	 cmp	 eax, 32			; 00000020H
  00132	75 19		 jne	 SHORT $LN1@BlAcpiLoca
  00134	ba 14 00 00 00	 mov	 edx, 20			; 00000014H
  00139	8b 4d f4	 mov	 ecx, DWORD PTR _Rsdp$[ebp]
  0013c	e8 00 00 00 00	 call	 ?BlRtlComputeChecksum8@@YIEPBXK@Z ; BlRtlComputeChecksum8
  00141	0f b6 c8	 movzx	 ecx, al
  00144	85 c9		 test	 ecx, ecx
  00146	75 05		 jne	 SHORT $LN1@BlAcpiLoca

; 281  : 
; 282  :             return Rsdp;

  00148	8b 45 f4	 mov	 eax, DWORD PTR _Rsdp$[ebp]
  0014b	eb 10		 jmp	 SHORT $LN7@BlAcpiLoca
$LN1@BlAcpiLoca:

; 283  :         }
; 284  : 
; 285  :         Start += 0x10;

  0014d	8b 55 fc	 mov	 edx, DWORD PTR _Start$[ebp]
  00150	83 c2 10	 add	 edx, 16			; 00000010H
  00153	89 55 fc	 mov	 DWORD PTR _Start$[ebp], edx

; 286  :     }

  00156	e9 68 ff ff ff	 jmp	 $LN3@BlAcpiLoca
$LN2@BlAcpiLoca:

; 287  : 
; 288  :     return NULL;

  0015b	33 c0		 xor	 eax, eax
$LN7@BlAcpiLoca:

; 289  : }

  0015d	8b e5		 mov	 esp, ebp
  0015f	5d		 pop	 ebp
  00160	c3		 ret	 0
?BlAcpiLocateRsdp@@YIPAU_ACPI_RSDP@@XZ ENDP		; BlAcpiLocateRsdp
_TEXT	ENDS
PUBLIC	?BlAcpiLocateRsdt@@YIPAU_ACPI_RSDT@@PAU_ACPI_RSDP@@@Z ; BlAcpiLocateRsdt
; Function compile flags: /Odtp
;	COMDAT ?BlAcpiLocateRsdt@@YIPAU_ACPI_RSDT@@PAU_ACPI_RSDP@@@Z
_TEXT	SEGMENT
_Rsdp$ = -8						; size = 4
_Rsdt$ = -4						; size = 4
?BlAcpiLocateRsdt@@YIPAU_ACPI_RSDT@@PAU_ACPI_RSDP@@@Z PROC ; BlAcpiLocateRsdt, COMDAT
; _Rsdp$ = ecx

; 313  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	89 4d f8	 mov	 DWORD PTR _Rsdp$[ebp], ecx

; 314  :     PACPI_RSDT Rsdt;
; 315  : 
; 316  :     Rsdt = (PACPI_RSDT) (ULONG_PTR) Rsdp->RsdtAddress;

  00009	8b 45 f8	 mov	 eax, DWORD PTR _Rsdp$[ebp]
  0000c	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  0000f	89 4d fc	 mov	 DWORD PTR _Rsdt$[ebp], ecx

; 317  : 
; 318  :     if (Rsdt == NULL) {

  00012	83 7d fc 00	 cmp	 DWORD PTR _Rsdt$[ebp], 0
  00016	75 04		 jne	 SHORT $LN2@BlAcpiLoca@2

; 319  : 
; 320  :         return NULL;

  00018	33 c0		 xor	 eax, eax
  0001a	eb 54		 jmp	 SHORT $LN3@BlAcpiLoca@2
$LN2@BlAcpiLoca@2:

; 321  :     }
; 322  : 
; 323  :     if ((Rsdt->Signature[0] == 'R') &&
; 324  :         (Rsdt->Signature[1] == 'S') &&
; 325  :         (Rsdt->Signature[2] == 'D') &&
; 326  :         (Rsdt->Signature[3] == 'T') &&
; 327  :         (Rsdt->Length >= sizeof(ACPI_RSDT)) &&
; 328  :         (BlRtlComputeChecksum8(Rsdt, Rsdt->Length) == 0)) {

  0001c	8b 55 fc	 mov	 edx, DWORD PTR _Rsdt$[ebp]
  0001f	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  00022	83 f8 52	 cmp	 eax, 82			; 00000052H
  00025	75 47		 jne	 SHORT $LN1@BlAcpiLoca@2
  00027	8b 4d fc	 mov	 ecx, DWORD PTR _Rsdt$[ebp]
  0002a	0f b6 51 01	 movzx	 edx, BYTE PTR [ecx+1]
  0002e	83 fa 53	 cmp	 edx, 83			; 00000053H
  00031	75 3b		 jne	 SHORT $LN1@BlAcpiLoca@2
  00033	8b 45 fc	 mov	 eax, DWORD PTR _Rsdt$[ebp]
  00036	0f b6 48 02	 movzx	 ecx, BYTE PTR [eax+2]
  0003a	83 f9 44	 cmp	 ecx, 68			; 00000044H
  0003d	75 2f		 jne	 SHORT $LN1@BlAcpiLoca@2
  0003f	8b 55 fc	 mov	 edx, DWORD PTR _Rsdt$[ebp]
  00042	0f b6 42 03	 movzx	 eax, BYTE PTR [edx+3]
  00046	83 f8 54	 cmp	 eax, 84			; 00000054H
  00049	75 23		 jne	 SHORT $LN1@BlAcpiLoca@2
  0004b	8b 4d fc	 mov	 ecx, DWORD PTR _Rsdt$[ebp]
  0004e	83 79 04 24	 cmp	 DWORD PTR [ecx+4], 36	; 00000024H
  00052	72 1a		 jb	 SHORT $LN1@BlAcpiLoca@2
  00054	8b 55 fc	 mov	 edx, DWORD PTR _Rsdt$[ebp]
  00057	8b 52 04	 mov	 edx, DWORD PTR [edx+4]
  0005a	8b 4d fc	 mov	 ecx, DWORD PTR _Rsdt$[ebp]
  0005d	e8 00 00 00 00	 call	 ?BlRtlComputeChecksum8@@YIEPBXK@Z ; BlRtlComputeChecksum8
  00062	0f b6 c0	 movzx	 eax, al
  00065	85 c0		 test	 eax, eax
  00067	75 05		 jne	 SHORT $LN1@BlAcpiLoca@2

; 329  : 
; 330  :         return Rsdt;

  00069	8b 45 fc	 mov	 eax, DWORD PTR _Rsdt$[ebp]
  0006c	eb 02		 jmp	 SHORT $LN3@BlAcpiLoca@2
$LN1@BlAcpiLoca@2:

; 331  :     }
; 332  : 
; 333  :     return NULL;

  0006e	33 c0		 xor	 eax, eax
$LN3@BlAcpiLoca@2:

; 334  : }

  00070	8b e5		 mov	 esp, ebp
  00072	5d		 pop	 ebp
  00073	c3		 ret	 0
?BlAcpiLocateRsdt@@YIPAU_ACPI_RSDT@@PAU_ACPI_RSDP@@@Z ENDP ; BlAcpiLocateRsdt
_TEXT	ENDS
PUBLIC	?BlAcpiLocateMadt@@YIPAU_ACPI_MADT@@PAU_ACPI_RSDT@@@Z ; BlAcpiLocateMadt
; Function compile flags: /Odtp
;	COMDAT ?BlAcpiLocateMadt@@YIPAU_ACPI_MADT@@PAU_ACPI_RSDT@@@Z
_TEXT	SEGMENT
_Rsdt$ = -16						; size = 4
_NumberOfTables$ = -12					; size = 4
_Madt$ = -8						; size = 4
_Index$ = -4						; size = 4
?BlAcpiLocateMadt@@YIPAU_ACPI_MADT@@PAU_ACPI_RSDT@@@Z PROC ; BlAcpiLocateMadt, COMDAT
; _Rsdt$ = ecx

; 358  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 10	 sub	 esp, 16			; 00000010H
  00006	89 4d f0	 mov	 DWORD PTR _Rsdt$[ebp], ecx

; 359  :     UINT32 Index;
; 360  :     PACPI_MADT Madt;
; 361  :     UINT32 NumberOfTables;
; 362  : 
; 363  :     NumberOfTables = (Rsdt->Length - FIELD_OFFSET(ACPI_RSDT, Entry)) / sizeof(Rsdt->Entry[0]);

  00009	8b 45 f0	 mov	 eax, DWORD PTR _Rsdt$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	83 e9 24	 sub	 ecx, 36			; 00000024H
  00012	c1 e9 02	 shr	 ecx, 2
  00015	89 4d f4	 mov	 DWORD PTR _NumberOfTables$[ebp], ecx

; 364  : 
; 365  :     for (Index = 0; Index < NumberOfTables; Index += 1) {

  00018	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _Index$[ebp], 0
  0001f	eb 09		 jmp	 SHORT $LN4@BlAcpiLoca@3
$LN3@BlAcpiLoca@3:
  00021	8b 55 fc	 mov	 edx, DWORD PTR _Index$[ebp]
  00024	83 c2 01	 add	 edx, 1
  00027	89 55 fc	 mov	 DWORD PTR _Index$[ebp], edx
$LN4@BlAcpiLoca@3:
  0002a	8b 45 fc	 mov	 eax, DWORD PTR _Index$[ebp]
  0002d	3b 45 f4	 cmp	 eax, DWORD PTR _NumberOfTables$[ebp]
  00030	73 61		 jae	 SHORT $LN2@BlAcpiLoca@3

; 366  : 
; 367  :         Madt = (PACPI_MADT) (ULONG_PTR) Rsdt->Entry[Index];

  00032	8b 4d fc	 mov	 ecx, DWORD PTR _Index$[ebp]
  00035	8b 55 f0	 mov	 edx, DWORD PTR _Rsdt$[ebp]
  00038	8b 44 8a 24	 mov	 eax, DWORD PTR [edx+ecx*4+36]
  0003c	89 45 f8	 mov	 DWORD PTR _Madt$[ebp], eax

; 368  : 
; 369  :         if ((Madt->Signature[0] == 'A') &&
; 370  :             (Madt->Signature[1] == 'P') &&
; 371  :             (Madt->Signature[2] == 'I') &&
; 372  :             (Madt->Signature[3] == 'C') &&
; 373  :             (Madt->Length >= sizeof(ACPI_MADT)) &&
; 374  :             (BlRtlComputeChecksum8(Madt, Madt->Length) == 0)) {

  0003f	8b 4d f8	 mov	 ecx, DWORD PTR _Madt$[ebp]
  00042	0f b6 11	 movzx	 edx, BYTE PTR [ecx]
  00045	83 fa 41	 cmp	 edx, 65			; 00000041H
  00048	75 47		 jne	 SHORT $LN1@BlAcpiLoca@3
  0004a	8b 45 f8	 mov	 eax, DWORD PTR _Madt$[ebp]
  0004d	0f b6 48 01	 movzx	 ecx, BYTE PTR [eax+1]
  00051	83 f9 50	 cmp	 ecx, 80			; 00000050H
  00054	75 3b		 jne	 SHORT $LN1@BlAcpiLoca@3
  00056	8b 55 f8	 mov	 edx, DWORD PTR _Madt$[ebp]
  00059	0f b6 42 02	 movzx	 eax, BYTE PTR [edx+2]
  0005d	83 f8 49	 cmp	 eax, 73			; 00000049H
  00060	75 2f		 jne	 SHORT $LN1@BlAcpiLoca@3
  00062	8b 4d f8	 mov	 ecx, DWORD PTR _Madt$[ebp]
  00065	0f b6 51 03	 movzx	 edx, BYTE PTR [ecx+3]
  00069	83 fa 43	 cmp	 edx, 67			; 00000043H
  0006c	75 23		 jne	 SHORT $LN1@BlAcpiLoca@3
  0006e	8b 45 f8	 mov	 eax, DWORD PTR _Madt$[ebp]
  00071	83 78 04 2c	 cmp	 DWORD PTR [eax+4], 44	; 0000002cH
  00075	72 1a		 jb	 SHORT $LN1@BlAcpiLoca@3
  00077	8b 4d f8	 mov	 ecx, DWORD PTR _Madt$[ebp]
  0007a	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0007d	8b 4d f8	 mov	 ecx, DWORD PTR _Madt$[ebp]
  00080	e8 00 00 00 00	 call	 ?BlRtlComputeChecksum8@@YIEPBXK@Z ; BlRtlComputeChecksum8
  00085	0f b6 d0	 movzx	 edx, al
  00088	85 d2		 test	 edx, edx
  0008a	75 05		 jne	 SHORT $LN1@BlAcpiLoca@3

; 375  : 
; 376  :             return Madt;

  0008c	8b 45 f8	 mov	 eax, DWORD PTR _Madt$[ebp]
  0008f	eb 04		 jmp	 SHORT $LN5@BlAcpiLoca@3
$LN1@BlAcpiLoca@3:

; 377  :         }
; 378  :     }

  00091	eb 8e		 jmp	 SHORT $LN3@BlAcpiLoca@3
$LN2@BlAcpiLoca@3:

; 379  : 
; 380  :     return NULL;

  00093	33 c0		 xor	 eax, eax
$LN5@BlAcpiLoca@3:

; 381  : }

  00095	8b e5		 mov	 esp, ebp
  00097	5d		 pop	 ebp
  00098	c3		 ret	 0
?BlAcpiLocateMadt@@YIPAU_ACPI_MADT@@PAU_ACPI_RSDT@@@Z ENDP ; BlAcpiLocateMadt
_TEXT	ENDS
PUBLIC	?BlAcpiLocateSrat@@YIPAU_ACPI_SRAT@@PAU_ACPI_RSDT@@@Z ; BlAcpiLocateSrat
; Function compile flags: /Odtp
;	COMDAT ?BlAcpiLocateSrat@@YIPAU_ACPI_SRAT@@PAU_ACPI_RSDT@@@Z
_TEXT	SEGMENT
_Rsdt$ = -16						; size = 4
_Srat$ = -12						; size = 4
_NumberOfTables$ = -8					; size = 4
_Index$ = -4						; size = 4
?BlAcpiLocateSrat@@YIPAU_ACPI_SRAT@@PAU_ACPI_RSDT@@@Z PROC ; BlAcpiLocateSrat, COMDAT
; _Rsdt$ = ecx

; 405  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 10	 sub	 esp, 16			; 00000010H
  00006	89 4d f0	 mov	 DWORD PTR _Rsdt$[ebp], ecx

; 406  :     UINT32 Index;
; 407  :     PACPI_SRAT Srat;
; 408  :     UINT32 NumberOfTables;
; 409  : 
; 410  :     NumberOfTables = (Rsdt->Length - FIELD_OFFSET(ACPI_RSDT, Entry)) / sizeof(Rsdt->Entry[0]);

  00009	8b 45 f0	 mov	 eax, DWORD PTR _Rsdt$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	83 e9 24	 sub	 ecx, 36			; 00000024H
  00012	c1 e9 02	 shr	 ecx, 2
  00015	89 4d f8	 mov	 DWORD PTR _NumberOfTables$[ebp], ecx

; 411  : 
; 412  :     for (Index = 0; Index < NumberOfTables; Index += 1) {

  00018	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _Index$[ebp], 0
  0001f	eb 09		 jmp	 SHORT $LN4@BlAcpiLoca@4
$LN3@BlAcpiLoca@4:
  00021	8b 55 fc	 mov	 edx, DWORD PTR _Index$[ebp]
  00024	83 c2 01	 add	 edx, 1
  00027	89 55 fc	 mov	 DWORD PTR _Index$[ebp], edx
$LN4@BlAcpiLoca@4:
  0002a	8b 45 fc	 mov	 eax, DWORD PTR _Index$[ebp]
  0002d	3b 45 f8	 cmp	 eax, DWORD PTR _NumberOfTables$[ebp]
  00030	73 61		 jae	 SHORT $LN2@BlAcpiLoca@4

; 413  : 
; 414  :         Srat = (PACPI_SRAT) (ULONG_PTR) Rsdt->Entry[Index];

  00032	8b 4d fc	 mov	 ecx, DWORD PTR _Index$[ebp]
  00035	8b 55 f0	 mov	 edx, DWORD PTR _Rsdt$[ebp]
  00038	8b 44 8a 24	 mov	 eax, DWORD PTR [edx+ecx*4+36]
  0003c	89 45 f4	 mov	 DWORD PTR _Srat$[ebp], eax

; 415  : 
; 416  :         if ((Srat->Signature[0] == 'S') &&
; 417  :             (Srat->Signature[1] == 'R') &&
; 418  :             (Srat->Signature[2] == 'A') &&
; 419  :             (Srat->Signature[3] == 'T') &&
; 420  :             (Srat->Length >= sizeof(ACPI_SRAT)) &&
; 421  :             (BlRtlComputeChecksum8(Srat, Srat->Length) == 0)) {

  0003f	8b 4d f4	 mov	 ecx, DWORD PTR _Srat$[ebp]
  00042	0f b6 11	 movzx	 edx, BYTE PTR [ecx]
  00045	83 fa 53	 cmp	 edx, 83			; 00000053H
  00048	75 47		 jne	 SHORT $LN1@BlAcpiLoca@4
  0004a	8b 45 f4	 mov	 eax, DWORD PTR _Srat$[ebp]
  0004d	0f b6 48 01	 movzx	 ecx, BYTE PTR [eax+1]
  00051	83 f9 52	 cmp	 ecx, 82			; 00000052H
  00054	75 3b		 jne	 SHORT $LN1@BlAcpiLoca@4
  00056	8b 55 f4	 mov	 edx, DWORD PTR _Srat$[ebp]
  00059	0f b6 42 02	 movzx	 eax, BYTE PTR [edx+2]
  0005d	83 f8 41	 cmp	 eax, 65			; 00000041H
  00060	75 2f		 jne	 SHORT $LN1@BlAcpiLoca@4
  00062	8b 4d f4	 mov	 ecx, DWORD PTR _Srat$[ebp]
  00065	0f b6 51 03	 movzx	 edx, BYTE PTR [ecx+3]
  00069	83 fa 54	 cmp	 edx, 84			; 00000054H
  0006c	75 23		 jne	 SHORT $LN1@BlAcpiLoca@4
  0006e	8b 45 f4	 mov	 eax, DWORD PTR _Srat$[ebp]
  00071	83 78 04 30	 cmp	 DWORD PTR [eax+4], 48	; 00000030H
  00075	72 1a		 jb	 SHORT $LN1@BlAcpiLoca@4
  00077	8b 4d f4	 mov	 ecx, DWORD PTR _Srat$[ebp]
  0007a	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0007d	8b 4d f4	 mov	 ecx, DWORD PTR _Srat$[ebp]
  00080	e8 00 00 00 00	 call	 ?BlRtlComputeChecksum8@@YIEPBXK@Z ; BlRtlComputeChecksum8
  00085	0f b6 d0	 movzx	 edx, al
  00088	85 d2		 test	 edx, edx
  0008a	75 05		 jne	 SHORT $LN1@BlAcpiLoca@4

; 422  : #if ACPI_VERBOSE
; 423  :                 BlRtlPrintf("ACPI: Found SRAT Table\n");
; 424  : #endif
; 425  : 
; 426  :             return Srat;

  0008c	8b 45 f4	 mov	 eax, DWORD PTR _Srat$[ebp]
  0008f	eb 04		 jmp	 SHORT $LN5@BlAcpiLoca@4
$LN1@BlAcpiLoca@4:

; 427  :         }
; 428  :     }

  00091	eb 8e		 jmp	 SHORT $LN3@BlAcpiLoca@4
$LN2@BlAcpiLoca@4:

; 429  : 
; 430  :     return NULL;

  00093	33 c0		 xor	 eax, eax
$LN5@BlAcpiLoca@4:

; 431  : }

  00095	8b e5		 mov	 esp, ebp
  00097	5d		 pop	 ebp
  00098	c3		 ret	 0
?BlAcpiLocateSrat@@YIPAU_ACPI_SRAT@@PAU_ACPI_RSDT@@@Z ENDP ; BlAcpiLocateSrat
_TEXT	ENDS
PUBLIC	??_C@_0BB@JLDALMDP@ACPI?3?5No?5Srat?$DP?$DP?6?$AA@ ; `string'
PUBLIC	?BlAcpiDumpSratEntries@@YIXXZ			; BlAcpiDumpSratEntries
EXTRN	?BlRtlPrintf@@YAEPBDZZ:PROC			; BlRtlPrintf
;	COMDAT ??_C@_0BB@JLDALMDP@ACPI?3?5No?5Srat?$DP?$DP?6?$AA@
CONST	SEGMENT
??_C@_0BB@JLDALMDP@ACPI?3?5No?5Srat?$DP?$DP?6?$AA@ DB 'ACPI: No Srat??', 0aH
	DB	00H						; `string'
; Function compile flags: /Odtp
CONST	ENDS
;	COMDAT ?BlAcpiDumpSratEntries@@YIXXZ
_TEXT	SEGMENT
_ProcAffinityEntry$ = -28				; size = 4
_MemAffinityEntry$ = -24				; size = 4
_Next$ = -20						; size = 4
_hbits$ = -16						; size = 4
_Entry$ = -12						; size = 4
_Limit$ = -8						; size = 4
_totalbits$ = -4					; size = 4
?BlAcpiDumpSratEntries@@YIXXZ PROC			; BlAcpiDumpSratEntries, COMDAT

; 443  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH

; 444  :     PACPI_SRAT_ENTRY Entry;
; 445  :     PCHAR Limit;
; 446  :     PACPI_SRAT_PROC_AFFINITY_ENTRY ProcAffinityEntry;
; 447  :     PACPI_SRAT_MEM_AFFINITY_ENTRY MemAffinityEntry;
; 448  :     PCHAR Next;
; 449  :     UINT32 hbits;
; 450  :     UINT32 totalbits;
; 451  : 
; 452  :     if (BlAcpiSrat == NULL) {

  00006	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?BlAcpiSrat@@3PAU_ACPI_SRAT@@A, 0 ; BlAcpiSrat
  0000d	75 12		 jne	 SHORT $LN6@BlAcpiDump

; 453  :         BlRtlPrintf("ACPI: No Srat??\n");

  0000f	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@JLDALMDP@ACPI?3?5No?5Srat?$DP?$DP?6?$AA@
  00014	e8 00 00 00 00	 call	 ?BlRtlPrintf@@YAEPBDZZ	; BlRtlPrintf
  00019	83 c4 04	 add	 esp, 4

; 454  :         return;

  0001c	e9 c0 00 00 00	 jmp	 $LN7@BlAcpiDump
$LN6@BlAcpiDump:

; 455  :     }
; 456  : #if ACPI_VERBOSE
; 457  :     BlRtlPrintf("SRAT:\n");
; 458  : #endif
; 459  : 
; 460  :     Next = (PCHAR) &BlAcpiSrat->SratStructures[0];

  00021	a1 00 00 00 00	 mov	 eax, DWORD PTR ?BlAcpiSrat@@3PAU_ACPI_SRAT@@A ; BlAcpiSrat
  00026	83 c0 30	 add	 eax, 48			; 00000030H
  00029	89 45 ec	 mov	 DWORD PTR _Next$[ebp], eax

; 461  :     Limit = ((PCHAR) BlAcpiSrat) + BlAcpiSrat->Length;

  0002c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlAcpiSrat@@3PAU_ACPI_SRAT@@A ; BlAcpiSrat
  00032	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?BlAcpiSrat@@3PAU_ACPI_SRAT@@A ; BlAcpiSrat
  00038	03 51 04	 add	 edx, DWORD PTR [ecx+4]
  0003b	89 55 f8	 mov	 DWORD PTR _Limit$[ebp], edx
$LN5@BlAcpiDump:

; 462  : 
; 463  :     while (Next < Limit) {

  0003e	8b 45 ec	 mov	 eax, DWORD PTR _Next$[ebp]
  00041	3b 45 f8	 cmp	 eax, DWORD PTR _Limit$[ebp]
  00044	0f 83 97 00 00
	00		 jae	 $LN7@BlAcpiDump

; 464  : 
; 465  :         Entry = (PACPI_SRAT_ENTRY) Next;

  0004a	8b 4d ec	 mov	 ecx, DWORD PTR _Next$[ebp]
  0004d	89 4d f4	 mov	 DWORD PTR _Entry$[ebp], ecx

; 466  : 
; 467  :         if ((Entry->Type == ACPI_SRAT_TYPE_PROC_AFFINITY_ENTRY) &&
; 468  :             (Entry->Length >= sizeof(ACPI_SRAT_PROC_AFFINITY_ENTRY))) {

  00050	8b 55 f4	 mov	 edx, DWORD PTR _Entry$[ebp]
  00053	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  00056	85 c0		 test	 eax, eax
  00058	75 58		 jne	 SHORT $LN3@BlAcpiDump
  0005a	8b 4d f4	 mov	 ecx, DWORD PTR _Entry$[ebp]
  0005d	0f b6 51 01	 movzx	 edx, BYTE PTR [ecx+1]
  00061	83 fa 10	 cmp	 edx, 16			; 00000010H
  00064	72 4c		 jb	 SHORT $LN3@BlAcpiDump

; 469  : 
; 470  :             ProcAffinityEntry = (PACPI_SRAT_PROC_AFFINITY_ENTRY) Next;

  00066	8b 45 ec	 mov	 eax, DWORD PTR _Next$[ebp]
  00069	89 45 e4	 mov	 DWORD PTR _ProcAffinityEntry$[ebp], eax

; 471  : #if ACPI_VERBOSE
; 472  :             BlRtlPrintf(" Processor:\n");
; 473  : #endif
; 474  :             hbits = 0;

  0006c	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _hbits$[ebp], 0

; 475  :             hbits += ProcAffinityEntry->ProximityDomainHighTwentyFourBits[0] << 24;

  00073	8b 4d e4	 mov	 ecx, DWORD PTR _ProcAffinityEntry$[ebp]
  00076	0f b6 51 09	 movzx	 edx, BYTE PTR [ecx+9]
  0007a	c1 e2 18	 shl	 edx, 24			; 00000018H
  0007d	03 55 f0	 add	 edx, DWORD PTR _hbits$[ebp]
  00080	89 55 f0	 mov	 DWORD PTR _hbits$[ebp], edx

; 476  :             hbits += ProcAffinityEntry->ProximityDomainHighTwentyFourBits[1] << 16;

  00083	8b 45 e4	 mov	 eax, DWORD PTR _ProcAffinityEntry$[ebp]
  00086	0f b6 48 0a	 movzx	 ecx, BYTE PTR [eax+10]
  0008a	c1 e1 10	 shl	 ecx, 16			; 00000010H
  0008d	03 4d f0	 add	 ecx, DWORD PTR _hbits$[ebp]
  00090	89 4d f0	 mov	 DWORD PTR _hbits$[ebp], ecx

; 477  :             hbits += ProcAffinityEntry->ProximityDomainHighTwentyFourBits[2] << 8;

  00093	8b 55 e4	 mov	 edx, DWORD PTR _ProcAffinityEntry$[ebp]
  00096	0f b6 42 0b	 movzx	 eax, BYTE PTR [edx+11]
  0009a	c1 e0 08	 shl	 eax, 8
  0009d	03 45 f0	 add	 eax, DWORD PTR _hbits$[ebp]
  000a0	89 45 f0	 mov	 DWORD PTR _hbits$[ebp], eax

; 478  :             totalbits = hbits | ProcAffinityEntry->ProximityDomainLowEightBits;

  000a3	8b 4d e4	 mov	 ecx, DWORD PTR _ProcAffinityEntry$[ebp]
  000a6	0f b6 51 02	 movzx	 edx, BYTE PTR [ecx+2]
  000aa	0b 55 f0	 or	 edx, DWORD PTR _hbits$[ebp]
  000ad	89 55 fc	 mov	 DWORD PTR _totalbits$[ebp], edx

; 479  : #if ACPI_VERBOSE
; 480  :             BlRtlPrintf("  HighDomain 0x%06x LowDomain 0x%02x totalbits 0x%08x\n",
; 481  :                         hbits, ProcAffinityEntry->ProximityDomainLowEightBits,
; 482  :                         totalbits);
; 483  :             BlRtlPrintf("  ApicID: %d flags 0x%08x\n", ProcAffinityEntry->ApicID,
; 484  :                         ProcAffinityEntry->Flags);
; 485  : #endif
; 486  :         }
; 487  :         else if ((Entry->Type == ACPI_SRAT_TYPE_MEM_AFFINITY_ENTRY) &&

  000b0	eb 1d		 jmp	 SHORT $LN2@BlAcpiDump
$LN3@BlAcpiDump:

; 488  :                    (Entry->Length >= sizeof(ACPI_SRAT_MEM_AFFINITY_ENTRY))) {

  000b2	8b 45 f4	 mov	 eax, DWORD PTR _Entry$[ebp]
  000b5	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  000b8	83 f9 01	 cmp	 ecx, 1
  000bb	75 12		 jne	 SHORT $LN2@BlAcpiDump
  000bd	8b 55 f4	 mov	 edx, DWORD PTR _Entry$[ebp]
  000c0	0f b6 42 01	 movzx	 eax, BYTE PTR [edx+1]
  000c4	83 f8 28	 cmp	 eax, 40			; 00000028H
  000c7	72 06		 jb	 SHORT $LN2@BlAcpiDump

; 489  : 
; 490  :             MemAffinityEntry = (PACPI_SRAT_MEM_AFFINITY_ENTRY) Next;

  000c9	8b 4d ec	 mov	 ecx, DWORD PTR _Next$[ebp]
  000cc	89 4d e8	 mov	 DWORD PTR _MemAffinityEntry$[ebp], ecx
$LN2@BlAcpiDump:

; 491  : #if ACPI_VERBOSE
; 492  :             BlRtlPrintf(" Memory:\n");
; 493  :             BlRtlPrintf("  BaseAddress 0x%08x.%08x ..  0x%08x.%08x",
; 494  :                         MemAffinityEntry->BaseAddressHigh, MemAffinityEntry->BaseAddressLow,
; 495  :                         MemAffinityEntry->LengthHigh, MemAffinityEntry->LengthLow);
; 496  :             BlRtlPrintf("  Domain %d  Flags 0x%08x\n",
; 497  :                         MemAffinityEntry->ProximityDomain,
; 498  :                         MemAffinityEntry->Flags);
; 499  : #endif
; 500  :         }
; 501  : 
; 502  :         Next += Entry->Length;

  000cf	8b 55 f4	 mov	 edx, DWORD PTR _Entry$[ebp]
  000d2	0f b6 42 01	 movzx	 eax, BYTE PTR [edx+1]
  000d6	03 45 ec	 add	 eax, DWORD PTR _Next$[ebp]
  000d9	89 45 ec	 mov	 DWORD PTR _Next$[ebp], eax

; 503  :     }

  000dc	e9 5d ff ff ff	 jmp	 $LN5@BlAcpiDump
$LN7@BlAcpiDump:

; 504  : }

  000e1	8b e5		 mov	 esp, ebp
  000e3	5d		 pop	 ebp
  000e4	c3		 ret	 0
?BlAcpiDumpSratEntries@@YIXXZ ENDP			; BlAcpiDumpSratEntries
_TEXT	ENDS
PUBLIC	?BlAcpiGetNumberOfProcessors@@YIKXZ		; BlAcpiGetNumberOfProcessors
; Function compile flags: /Odtp
;	COMDAT ?BlAcpiGetNumberOfProcessors@@YIKXZ
_TEXT	SEGMENT
_Next$ = -20						; size = 4
_LocalApic$ = -16					; size = 4
_Entry$ = -12						; size = 4
_NumberOfProcessors$ = -8				; size = 4
_Limit$ = -4						; size = 4
?BlAcpiGetNumberOfProcessors@@YIKXZ PROC		; BlAcpiGetNumberOfProcessors, COMDAT

; 522  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H

; 523  :     PACPI_MADT_ENTRY Entry;
; 524  :     PCHAR Limit;
; 525  :     PACPI_PROCESSOR_LOCAL_APIC LocalApic;
; 526  :     PCHAR Next;
; 527  :     UINT32 NumberOfProcessors;
; 528  : 
; 529  :     if (BlAcpiMadt == NULL) {

  00006	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?BlAcpiMadt@@3PAU_ACPI_MADT@@A, 0 ; BlAcpiMadt
  0000d	75 07		 jne	 SHORT $LN5@BlAcpiGetN

; 530  : 
; 531  :         return 1;

  0000f	b8 01 00 00 00	 mov	 eax, 1
  00014	eb 74		 jmp	 SHORT $LN6@BlAcpiGetN
$LN5@BlAcpiGetN:

; 532  :     }
; 533  : 
; 534  :     Next = (PCHAR) &BlAcpiMadt->ApicStructures[0];

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?BlAcpiMadt@@3PAU_ACPI_MADT@@A ; BlAcpiMadt
  0001b	83 c0 2c	 add	 eax, 44			; 0000002cH
  0001e	89 45 ec	 mov	 DWORD PTR _Next$[ebp], eax

; 535  :     Limit = ((PCHAR) BlAcpiMadt) + BlAcpiMadt->Length;

  00021	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlAcpiMadt@@3PAU_ACPI_MADT@@A ; BlAcpiMadt
  00027	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?BlAcpiMadt@@3PAU_ACPI_MADT@@A ; BlAcpiMadt
  0002d	03 51 04	 add	 edx, DWORD PTR [ecx+4]
  00030	89 55 fc	 mov	 DWORD PTR _Limit$[ebp], edx

; 536  :     NumberOfProcessors = 0;

  00033	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _NumberOfProcessors$[ebp], 0
$LN4@BlAcpiGetN:

; 537  : 
; 538  :     while (Next < Limit) {

  0003a	8b 45 ec	 mov	 eax, DWORD PTR _Next$[ebp]
  0003d	3b 45 fc	 cmp	 eax, DWORD PTR _Limit$[ebp]
  00040	73 45		 jae	 SHORT $LN3@BlAcpiGetN

; 539  : 
; 540  :         Entry = (PACPI_MADT_ENTRY) Next;

  00042	8b 4d ec	 mov	 ecx, DWORD PTR _Next$[ebp]
  00045	89 4d f4	 mov	 DWORD PTR _Entry$[ebp], ecx

; 541  : 
; 542  :         if ((Entry->Type == ACPI_APIC_TYPE_PROCESSOR_LOCAL) &&
; 543  :             (Entry->Length >= sizeof(ACPI_PROCESSOR_LOCAL_APIC))) {

  00048	8b 55 f4	 mov	 edx, DWORD PTR _Entry$[ebp]
  0004b	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  0004e	85 c0		 test	 eax, eax
  00050	75 26		 jne	 SHORT $LN2@BlAcpiGetN
  00052	8b 4d f4	 mov	 ecx, DWORD PTR _Entry$[ebp]
  00055	0f b6 51 01	 movzx	 edx, BYTE PTR [ecx+1]
  00059	83 fa 08	 cmp	 edx, 8
  0005c	72 1a		 jb	 SHORT $LN2@BlAcpiGetN

; 544  : 
; 545  :             LocalApic = (PACPI_PROCESSOR_LOCAL_APIC) Next;

  0005e	8b 45 ec	 mov	 eax, DWORD PTR _Next$[ebp]
  00061	89 45 f0	 mov	 DWORD PTR _LocalApic$[ebp], eax

; 546  : 
; 547  :             if (LocalApic->u1.s1.Enabled != FALSE) {

  00064	8b 4d f0	 mov	 ecx, DWORD PTR _LocalApic$[ebp]
  00067	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0006a	83 e2 01	 and	 edx, 1
  0006d	74 09		 je	 SHORT $LN2@BlAcpiGetN

; 548  : 
; 549  : #if ACPI_VERBOSE
; 550  : 
; 551  :                 BlRtlPrintf("ACPI: AcpiProcessorId=%u , LocalApicId=%u\n",
; 552  :                             LocalApic->AcpiProcessorId,
; 553  :                             LocalApic->ApicId);
; 554  : 
; 555  : #endif
; 556  : 
; 557  :                 NumberOfProcessors += 1;

  0006f	8b 45 f8	 mov	 eax, DWORD PTR _NumberOfProcessors$[ebp]
  00072	83 c0 01	 add	 eax, 1
  00075	89 45 f8	 mov	 DWORD PTR _NumberOfProcessors$[ebp], eax
$LN2@BlAcpiGetN:

; 558  :             }
; 559  :         }
; 560  : 
; 561  :         Next += Entry->Length;

  00078	8b 4d f4	 mov	 ecx, DWORD PTR _Entry$[ebp]
  0007b	0f b6 51 01	 movzx	 edx, BYTE PTR [ecx+1]
  0007f	03 55 ec	 add	 edx, DWORD PTR _Next$[ebp]
  00082	89 55 ec	 mov	 DWORD PTR _Next$[ebp], edx

; 562  :     }

  00085	eb b3		 jmp	 SHORT $LN4@BlAcpiGetN
$LN3@BlAcpiGetN:

; 563  : 
; 564  :     return NumberOfProcessors;

  00087	8b 45 f8	 mov	 eax, DWORD PTR _NumberOfProcessors$[ebp]
$LN6@BlAcpiGetN:

; 565  : }

  0008a	8b e5		 mov	 esp, ebp
  0008c	5d		 pop	 ebp
  0008d	c3		 ret	 0
?BlAcpiGetNumberOfProcessors@@YIKXZ ENDP		; BlAcpiGetNumberOfProcessors
_TEXT	ENDS
PUBLIC	?BlAcpiLocateFadt@@YIPAU_ACPI_FADT@@PAU_ACPI_RSDT@@@Z ; BlAcpiLocateFadt
; Function compile flags: /Odtp
;	COMDAT ?BlAcpiLocateFadt@@YIPAU_ACPI_FADT@@PAU_ACPI_RSDT@@@Z
_TEXT	SEGMENT
_Rsdt$ = -16						; size = 4
_Fadt$ = -12						; size = 4
_NumberOfTables$ = -8					; size = 4
_Index$ = -4						; size = 4
?BlAcpiLocateFadt@@YIPAU_ACPI_FADT@@PAU_ACPI_RSDT@@@Z PROC ; BlAcpiLocateFadt, COMDAT
; _Rsdt$ = ecx

; 589  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 10	 sub	 esp, 16			; 00000010H
  00006	89 4d f0	 mov	 DWORD PTR _Rsdt$[ebp], ecx

; 590  :     PACPI_FADT Fadt;
; 591  :     UINT32 Index;
; 592  :     UINT32 NumberOfTables;
; 593  : 
; 594  :     NumberOfTables = (Rsdt->Length - FIELD_OFFSET(ACPI_RSDT, Entry)) / sizeof(Rsdt->Entry[0]);

  00009	8b 45 f0	 mov	 eax, DWORD PTR _Rsdt$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	83 e9 24	 sub	 ecx, 36			; 00000024H
  00012	c1 e9 02	 shr	 ecx, 2
  00015	89 4d f8	 mov	 DWORD PTR _NumberOfTables$[ebp], ecx

; 595  : 
; 596  :     for (Index = 0; Index < NumberOfTables; Index += 1) {

  00018	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _Index$[ebp], 0
  0001f	eb 09		 jmp	 SHORT $LN4@BlAcpiLoca@5
$LN3@BlAcpiLoca@5:
  00021	8b 55 fc	 mov	 edx, DWORD PTR _Index$[ebp]
  00024	83 c2 01	 add	 edx, 1
  00027	89 55 fc	 mov	 DWORD PTR _Index$[ebp], edx
$LN4@BlAcpiLoca@5:
  0002a	8b 45 fc	 mov	 eax, DWORD PTR _Index$[ebp]
  0002d	3b 45 f8	 cmp	 eax, DWORD PTR _NumberOfTables$[ebp]
  00030	73 58		 jae	 SHORT $LN2@BlAcpiLoca@5

; 597  : 
; 598  :         Fadt = (PACPI_FADT) (ULONG_PTR) Rsdt->Entry[Index];

  00032	8b 4d fc	 mov	 ecx, DWORD PTR _Index$[ebp]
  00035	8b 55 f0	 mov	 edx, DWORD PTR _Rsdt$[ebp]
  00038	8b 44 8a 24	 mov	 eax, DWORD PTR [edx+ecx*4+36]
  0003c	89 45 f4	 mov	 DWORD PTR _Fadt$[ebp], eax

; 599  : 
; 600  :         if ((Fadt->Signature[0] == 'F') &&
; 601  :             (Fadt->Signature[1] == 'A') &&
; 602  :             (Fadt->Signature[2] == 'C') &&
; 603  :             (Fadt->Signature[3] == 'P') &&
; 604  :             (BlRtlComputeChecksum8(Fadt, Fadt->Length) == 0)) {

  0003f	8b 4d f4	 mov	 ecx, DWORD PTR _Fadt$[ebp]
  00042	0f b6 11	 movzx	 edx, BYTE PTR [ecx]
  00045	83 fa 46	 cmp	 edx, 70			; 00000046H
  00048	75 3e		 jne	 SHORT $LN1@BlAcpiLoca@5
  0004a	8b 45 f4	 mov	 eax, DWORD PTR _Fadt$[ebp]
  0004d	0f b6 48 01	 movzx	 ecx, BYTE PTR [eax+1]
  00051	83 f9 41	 cmp	 ecx, 65			; 00000041H
  00054	75 32		 jne	 SHORT $LN1@BlAcpiLoca@5
  00056	8b 55 f4	 mov	 edx, DWORD PTR _Fadt$[ebp]
  00059	0f b6 42 02	 movzx	 eax, BYTE PTR [edx+2]
  0005d	83 f8 43	 cmp	 eax, 67			; 00000043H
  00060	75 26		 jne	 SHORT $LN1@BlAcpiLoca@5
  00062	8b 4d f4	 mov	 ecx, DWORD PTR _Fadt$[ebp]
  00065	0f b6 51 03	 movzx	 edx, BYTE PTR [ecx+3]
  00069	83 fa 50	 cmp	 edx, 80			; 00000050H
  0006c	75 1a		 jne	 SHORT $LN1@BlAcpiLoca@5
  0006e	8b 45 f4	 mov	 eax, DWORD PTR _Fadt$[ebp]
  00071	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00074	8b 4d f4	 mov	 ecx, DWORD PTR _Fadt$[ebp]
  00077	e8 00 00 00 00	 call	 ?BlRtlComputeChecksum8@@YIEPBXK@Z ; BlRtlComputeChecksum8
  0007c	0f b6 c8	 movzx	 ecx, al
  0007f	85 c9		 test	 ecx, ecx
  00081	75 05		 jne	 SHORT $LN1@BlAcpiLoca@5

; 605  : 
; 606  :             return Fadt;

  00083	8b 45 f4	 mov	 eax, DWORD PTR _Fadt$[ebp]
  00086	eb 04		 jmp	 SHORT $LN5@BlAcpiLoca@5
$LN1@BlAcpiLoca@5:

; 607  :         }
; 608  :     }

  00088	eb 97		 jmp	 SHORT $LN3@BlAcpiLoca@5
$LN2@BlAcpiLoca@5:

; 609  : 
; 610  :     return NULL;

  0008a	33 c0		 xor	 eax, eax
$LN5@BlAcpiLoca@5:

; 611  : }

  0008c	8b e5		 mov	 esp, ebp
  0008e	5d		 pop	 ebp
  0008f	c3		 ret	 0
?BlAcpiLocateFadt@@YIPAU_ACPI_FADT@@PAU_ACPI_RSDT@@@Z ENDP ; BlAcpiLocateFadt
_TEXT	ENDS
PUBLIC	?BlAcpiResetSystem@@YIXXZ			; BlAcpiResetSystem
EXTRN	?BlRtlWritePort8@@YIXGE@Z:PROC			; BlRtlWritePort8
; Function compile flags: /Odtp
;	COMDAT ?BlAcpiResetSystem@@YIXXZ
_TEXT	SEGMENT
tv75 = -4						; size = 4
?BlAcpiResetSystem@@YIXXZ PROC				; BlAcpiResetSystem, COMDAT

; 626  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 627  :     if ((BlAcpiFadt->Revision < 2) ||
; 628  :         (BlAcpiFadt->Length < (FIELD_OFFSET(ACPI_FADT, ResetValue) + sizeof(UINT8))) ||
; 629  :         ((BlAcpiFadt->Flags & ACPI_FADT_FLAGS_RESET_SUPPORTED) == 0)
; 630  :         ) {

  00004	a1 00 00 00 00	 mov	 eax, DWORD PTR ?BlAcpiFadt@@3PAU_ACPI_FADT@@A ; BlAcpiFadt
  00009	0f b6 48 08	 movzx	 ecx, BYTE PTR [eax+8]
  0000d	83 f9 02	 cmp	 ecx, 2
  00010	7c 1f		 jl	 SHORT $LN4@BlAcpiRese
  00012	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?BlAcpiFadt@@3PAU_ACPI_FADT@@A ; BlAcpiFadt
  00018	81 7a 04 81 00
	00 00		 cmp	 DWORD PTR [edx+4], 129	; 00000081H
  0001f	72 10		 jb	 SHORT $LN4@BlAcpiRese
  00021	a1 00 00 00 00	 mov	 eax, DWORD PTR ?BlAcpiFadt@@3PAU_ACPI_FADT@@A ; BlAcpiFadt
  00026	8b 48 70	 mov	 ecx, DWORD PTR [eax+112]
  00029	81 e1 00 04 00
	00		 and	 ecx, 1024		; 00000400H
  0002f	75 02		 jne	 SHORT $LN5@BlAcpiRese
$LN4@BlAcpiRese:

; 631  : 
; 632  : #if ACPI_VERBOSE
; 633  : 
; 634  :         BlRtlPrintf("ACPI: Reset register is not supported! [FADT v%u]\n", BlAcpiFadt->Revision);
; 635  : 
; 636  : #endif
; 637  : 
; 638  :         return;

  00031	eb 2f		 jmp	 SHORT $LN6@BlAcpiRese
$LN5@BlAcpiRese:

; 639  :     }
; 640  : 
; 641  : #if ACPI_VERBOSE
; 642  : 
; 643  :     BlRtlPrintf("ACPI: Reset register type is %u.\n", BlAcpiFadt->ResetRegister.AddressSpaceId);
; 644  : 
; 645  : #endif
; 646  : 
; 647  :     switch (BlAcpiFadt->ResetRegister.AddressSpaceId) {

  00033	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?BlAcpiFadt@@3PAU_ACPI_FADT@@A ; BlAcpiFadt
  00039	8a 42 74	 mov	 al, BYTE PTR [edx+116]
  0003c	88 45 fc	 mov	 BYTE PTR tv75[ebp], al
  0003f	80 7d fc 01	 cmp	 BYTE PTR tv75[ebp], 1
  00043	74 02		 je	 SHORT $LN1@BlAcpiRese
  00045	eb 1b		 jmp	 SHORT $LN6@BlAcpiRese
$LN1@BlAcpiRese:

; 648  : 
; 649  :         case ACPI_GAS_IO: {
; 650  : 
; 651  :             BlRtlWritePort8((UINT16) BlAcpiFadt->ResetRegister.Address, BlAcpiFadt->ResetValue);

  00047	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlAcpiFadt@@3PAU_ACPI_FADT@@A ; BlAcpiFadt
  0004d	66 8b 49 78	 mov	 cx, WORD PTR [ecx+120]
  00051	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?BlAcpiFadt@@3PAU_ACPI_FADT@@A ; BlAcpiFadt
  00057	8a 92 80 00 00
	00		 mov	 dl, BYTE PTR [edx+128]
  0005d	e8 00 00 00 00	 call	 ?BlRtlWritePort8@@YIXGE@Z ; BlRtlWritePort8
$LN6@BlAcpiRese:

; 652  : 
; 653  :             break;
; 654  :         }
; 655  :     }
; 656  : }

  00062	8b e5		 mov	 esp, ebp
  00064	5d		 pop	 ebp
  00065	c3		 ret	 0
?BlAcpiResetSystem@@YIXXZ ENDP				; BlAcpiResetSystem
_TEXT	ENDS
PUBLIC	??_C@_0BG@FCLKDBKH@ACPI?3?5No?5local?5APIC?$CB?6?$AA@ ; `string'
PUBLIC	??_C@_0BA@BODJODDC@ACPI?3?5No?5FADT?$CB?6?$AA@	; `string'
PUBLIC	??_C@_0BA@MDLGPIHP@ACPI?3?5No?5RSDT?$CB?6?$AA@	; `string'
PUBLIC	??_C@_0L@KNFIOBDM@blacpi?4cpp?$AA@		; `string'
PUBLIC	??_C@_0BA@EMNEGPCI@ACPI?3?5No?5RSDP?$CB?6?$AA@	; `string'
PUBLIC	?BlAcpiInitialize@@YIXXZ			; BlAcpiInitialize
EXTRN	?BlMmMapVirtualRange@@YIXPAX0KEEE@Z:PROC	; BlMmMapVirtualRange
EXTRN	?BlRtlHaltInternal@@YIXPBDK@Z:PROC		; BlRtlHaltInternal
;	COMDAT ??_C@_0BG@FCLKDBKH@ACPI?3?5No?5local?5APIC?$CB?6?$AA@
CONST	SEGMENT
??_C@_0BG@FCLKDBKH@ACPI?3?5No?5local?5APIC?$CB?6?$AA@ DB 'ACPI: No local '
	DB	'APIC!', 0aH, 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@BODJODDC@ACPI?3?5No?5FADT?$CB?6?$AA@
CONST	SEGMENT
??_C@_0BA@BODJODDC@ACPI?3?5No?5FADT?$CB?6?$AA@ DB 'ACPI: No FADT!', 0aH, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@MDLGPIHP@ACPI?3?5No?5RSDT?$CB?6?$AA@
CONST	SEGMENT
??_C@_0BA@MDLGPIHP@ACPI?3?5No?5RSDT?$CB?6?$AA@ DB 'ACPI: No RSDT!', 0aH, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@KNFIOBDM@blacpi?4cpp?$AA@
CONST	SEGMENT
??_C@_0L@KNFIOBDM@blacpi?4cpp?$AA@ DB 'blacpi.cpp', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@EMNEGPCI@ACPI?3?5No?5RSDP?$CB?6?$AA@
CONST	SEGMENT
??_C@_0BA@EMNEGPCI@ACPI?3?5No?5RSDP?$CB?6?$AA@ DB 'ACPI: No RSDP!', 0aH, 00H ; `string'
; Function compile flags: /Odtp
CONST	ENDS
;	COMDAT ?BlAcpiInitialize@@YIXXZ
_TEXT	SEGMENT
?BlAcpiInitialize@@YIXXZ PROC				; BlAcpiInitialize, COMDAT

; 671  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 672  :     BlAcpiRsdp = BlAcpiLocateRsdp();

  00003	e8 00 00 00 00	 call	 ?BlAcpiLocateRsdp@@YIPAU_ACPI_RSDP@@XZ ; BlAcpiLocateRsdp
  00008	a3 00 00 00 00	 mov	 DWORD PTR ?BlAcpiRsdp@@3PAU_ACPI_RSDP@@A, eax ; BlAcpiRsdp

; 673  : 
; 674  :     if (BlAcpiRsdp == NULL) {

  0000d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?BlAcpiRsdp@@3PAU_ACPI_RSDP@@A, 0 ; BlAcpiRsdp
  00014	75 1c		 jne	 SHORT $LN8@BlAcpiInit

; 675  : 
; 676  :         BlRtlPrintf("ACPI: No RSDP!\n");

  00016	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@EMNEGPCI@ACPI?3?5No?5RSDP?$CB?6?$AA@
  0001b	e8 00 00 00 00	 call	 ?BlRtlPrintf@@YAEPBDZZ	; BlRtlPrintf
  00020	83 c4 04	 add	 esp, 4

; 677  :         BlRtlHalt();

  00023	ba a5 02 00 00	 mov	 edx, 677		; 000002a5H
  00028	b9 00 00 00 00	 mov	 ecx, OFFSET ??_C@_0L@KNFIOBDM@blacpi?4cpp?$AA@
  0002d	e8 00 00 00 00	 call	 ?BlRtlHaltInternal@@YIXPBDK@Z ; BlRtlHaltInternal
$LN8@BlAcpiInit:

; 678  :     }
; 679  : 
; 680  :     BlAcpiRsdpAddress = (PVOID) BlAcpiRsdp;

  00032	a1 00 00 00 00	 mov	 eax, DWORD PTR ?BlAcpiRsdp@@3PAU_ACPI_RSDP@@A ; BlAcpiRsdp
  00037	a3 00 00 00 00	 mov	 DWORD PTR ?BlAcpiRsdpAddress@@3PAXA, eax ; BlAcpiRsdpAddress

; 681  : 
; 682  :     BlAcpiRsdt = BlAcpiLocateRsdt(BlAcpiRsdp);

  0003c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlAcpiRsdp@@3PAU_ACPI_RSDP@@A ; BlAcpiRsdp
  00042	e8 00 00 00 00	 call	 ?BlAcpiLocateRsdt@@YIPAU_ACPI_RSDT@@PAU_ACPI_RSDP@@@Z ; BlAcpiLocateRsdt
  00047	a3 00 00 00 00	 mov	 DWORD PTR ?BlAcpiRsdt@@3PAU_ACPI_RSDT@@A, eax ; BlAcpiRsdt

; 683  : 
; 684  :     if (BlAcpiRsdt == NULL) {

  0004c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?BlAcpiRsdt@@3PAU_ACPI_RSDT@@A, 0 ; BlAcpiRsdt
  00053	75 1c		 jne	 SHORT $LN7@BlAcpiInit

; 685  : 
; 686  :         BlRtlPrintf("ACPI: No RSDT!\n");

  00055	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@MDLGPIHP@ACPI?3?5No?5RSDT?$CB?6?$AA@
  0005a	e8 00 00 00 00	 call	 ?BlRtlPrintf@@YAEPBDZZ	; BlRtlPrintf
  0005f	83 c4 04	 add	 esp, 4

; 687  :         BlRtlHalt();

  00062	ba af 02 00 00	 mov	 edx, 687		; 000002afH
  00067	b9 00 00 00 00	 mov	 ecx, OFFSET ??_C@_0L@KNFIOBDM@blacpi?4cpp?$AA@
  0006c	e8 00 00 00 00	 call	 ?BlRtlHaltInternal@@YIXPBDK@Z ; BlRtlHaltInternal
$LN7@BlAcpiInit:

; 688  :     }
; 689  : 
; 690  :     BlAcpiFadt = BlAcpiLocateFadt(BlAcpiRsdt);

  00071	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlAcpiRsdt@@3PAU_ACPI_RSDT@@A ; BlAcpiRsdt
  00077	e8 00 00 00 00	 call	 ?BlAcpiLocateFadt@@YIPAU_ACPI_FADT@@PAU_ACPI_RSDT@@@Z ; BlAcpiLocateFadt
  0007c	a3 00 00 00 00	 mov	 DWORD PTR ?BlAcpiFadt@@3PAU_ACPI_FADT@@A, eax ; BlAcpiFadt

; 691  : 
; 692  :     if (BlAcpiFadt == NULL) {

  00081	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?BlAcpiFadt@@3PAU_ACPI_FADT@@A, 0 ; BlAcpiFadt
  00088	75 0d		 jne	 SHORT $LN6@BlAcpiInit

; 693  : 
; 694  :         BlRtlPrintf("ACPI: No FADT!\n");

  0008a	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@BODJODDC@ACPI?3?5No?5FADT?$CB?6?$AA@
  0008f	e8 00 00 00 00	 call	 ?BlRtlPrintf@@YAEPBDZZ	; BlRtlPrintf
  00094	83 c4 04	 add	 esp, 4
$LN6@BlAcpiInit:

; 695  :         //BlRtlHalt();
; 696  :     }
; 697  : 
; 698  :     BlAcpiMadt = BlAcpiLocateMadt(BlAcpiRsdt);

  00097	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlAcpiRsdt@@3PAU_ACPI_RSDT@@A ; BlAcpiRsdt
  0009d	e8 00 00 00 00	 call	 ?BlAcpiLocateMadt@@YIPAU_ACPI_MADT@@PAU_ACPI_RSDT@@@Z ; BlAcpiLocateMadt
  000a2	a3 00 00 00 00	 mov	 DWORD PTR ?BlAcpiMadt@@3PAU_ACPI_MADT@@A, eax ; BlAcpiMadt

; 699  : 
; 700  :     if (BlAcpiMadt == NULL) {

  000a7	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?BlAcpiMadt@@3PAU_ACPI_MADT@@A, 0 ; BlAcpiMadt
  000ae	75 0c		 jne	 SHORT $LN5@BlAcpiInit

; 701  : 
; 702  :         BlAcpiNumberOfProcessors = 1;

  000b0	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?BlAcpiNumberOfProcessors@@3KA, 1 ; BlAcpiNumberOfProcessors

; 703  : 
; 704  :     } else {

  000ba	eb 0a		 jmp	 SHORT $LN4@BlAcpiInit
$LN5@BlAcpiInit:

; 705  : 
; 706  :         BlAcpiNumberOfProcessors = BlAcpiGetNumberOfProcessors();

  000bc	e8 00 00 00 00	 call	 ?BlAcpiGetNumberOfProcessors@@YIKXZ ; BlAcpiGetNumberOfProcessors
  000c1	a3 00 00 00 00	 mov	 DWORD PTR ?BlAcpiNumberOfProcessors@@3KA, eax ; BlAcpiNumberOfProcessors
$LN4@BlAcpiInit:

; 707  :     }
; 708  : 
; 709  :     if (BlAcpiNumberOfProcessors == 0) {

  000c6	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?BlAcpiNumberOfProcessors@@3KA, 0 ; BlAcpiNumberOfProcessors
  000cd	75 1c		 jne	 SHORT $LN3@BlAcpiInit

; 710  : 
; 711  :         BlRtlPrintf("ACPI: No local APIC!\n");

  000cf	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@FCLKDBKH@ACPI?3?5No?5local?5APIC?$CB?6?$AA@
  000d4	e8 00 00 00 00	 call	 ?BlRtlPrintf@@YAEPBDZZ	; BlRtlPrintf
  000d9	83 c4 04	 add	 esp, 4

; 712  :         BlRtlHalt();

  000dc	ba c8 02 00 00	 mov	 edx, 712		; 000002c8H
  000e1	b9 00 00 00 00	 mov	 ecx, OFFSET ??_C@_0L@KNFIOBDM@blacpi?4cpp?$AA@
  000e6	e8 00 00 00 00	 call	 ?BlRtlHaltInternal@@YIXPBDK@Z ; BlRtlHaltInternal
$LN3@BlAcpiInit:

; 713  :     }
; 714  : 
; 715  :     BlAcpiSrat = BlAcpiLocateSrat(BlAcpiRsdt);

  000eb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlAcpiRsdt@@3PAU_ACPI_RSDT@@A ; BlAcpiRsdt
  000f1	e8 00 00 00 00	 call	 ?BlAcpiLocateSrat@@YIPAU_ACPI_SRAT@@PAU_ACPI_RSDT@@@Z ; BlAcpiLocateSrat
  000f6	a3 00 00 00 00	 mov	 DWORD PTR ?BlAcpiSrat@@3PAU_ACPI_SRAT@@A, eax ; BlAcpiSrat

; 716  :     if (BlAcpiSrat != NULL) {

  000fb	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?BlAcpiSrat@@3PAU_ACPI_SRAT@@A, 0 ; BlAcpiSrat
  00102	74 05		 je	 SHORT $LN2@BlAcpiInit

; 717  :         BlAcpiDumpSratEntries();

  00104	e8 00 00 00 00	 call	 ?BlAcpiDumpSratEntries@@YIXXZ ; BlAcpiDumpSratEntries
$LN2@BlAcpiInit:

; 718  :     }
; 719  : 
; 720  : 
; 721  : #if ACPI_VERBOSE
; 722  : 
; 723  :     BlRtlPrintf("ACPI: RSDP @ %p\n"
; 724  :                 "ACPI: RSDT @ %p\n"
; 725  :                 "ACPI: FADT @ %p [Revision=%u , Length=%u]\n"
; 726  :                 "ACPI: MADT @ %p\n"
; 727  :                 "ACPI: %u processor(s)\n",
; 728  :                 BlAcpiRsdp,
; 729  :                 BlAcpiRsdt,
; 730  :                 BlAcpiFadt,
; 731  :                 BlAcpiFadt->Revision,
; 732  :                 BlAcpiFadt->Length,
; 733  :                 BlAcpiMadt,
; 734  :                 BlAcpiNumberOfProcessors);
; 735  : 
; 736  : #endif
; 737  : 
; 738  :     //
; 739  :     // Map APIC page uncached.
; 740  :     //
; 741  : 
; 742  :     if ((BlAcpiMadt != NULL) && (BlAcpiMadt->LocalApicAddress != 0)) {

  00109	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?BlAcpiMadt@@3PAU_ACPI_MADT@@A, 0 ; BlAcpiMadt
  00110	74 2d		 je	 SHORT $LN9@BlAcpiInit
  00112	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlAcpiMadt@@3PAU_ACPI_MADT@@A ; BlAcpiMadt
  00118	83 79 24 00	 cmp	 DWORD PTR [ecx+36], 0
  0011c	74 21		 je	 SHORT $LN9@BlAcpiInit

; 743  : 
; 744  : #if ACPI_VERBOSE
; 745  : 
; 746  :         BlRtlPrintf("ACPI: APIC mapped @ %p.\n", BlAcpiMadt->LocalApicAddress);
; 747  : 
; 748  : #endif
; 749  : 
; 750  :         BlMmMapVirtualRange((PVOID) (ULONG_PTR) BlAcpiMadt->LocalApicAddress,
; 751  :                             (PVOID) (ULONG_PTR) BlAcpiMadt->LocalApicAddress,
; 752  :                             PAGE_SIZE,
; 753  :                             TRUE,
; 754  :                             FALSE,
; 755  :                             FALSE);

  0011e	6a 00		 push	 0
  00120	6a 00		 push	 0
  00122	6a 01		 push	 1
  00124	68 00 10 00 00	 push	 4096			; 00001000H
  00129	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?BlAcpiMadt@@3PAU_ACPI_MADT@@A ; BlAcpiMadt
  0012f	8b 52 24	 mov	 edx, DWORD PTR [edx+36]
  00132	a1 00 00 00 00	 mov	 eax, DWORD PTR ?BlAcpiMadt@@3PAU_ACPI_MADT@@A ; BlAcpiMadt
  00137	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  0013a	e8 00 00 00 00	 call	 ?BlMmMapVirtualRange@@YIXPAX0KEEE@Z ; BlMmMapVirtualRange
$LN9@BlAcpiInit:

; 756  :     }
; 757  : }

  0013f	5d		 pop	 ebp
  00140	c3		 ret	 0
?BlAcpiInitialize@@YIXXZ ENDP				; BlAcpiInitialize
_TEXT	ENDS
END
